configuration:
  appender:
    - name: LOKI
      class: com.github.loki4j.logback.Loki4jAppender
      http:
        url: "http://loki:3100/loki/api/v1/push"
      format:
        label:
          pattern: "app=${name},host=${HOSTNAME},level=%level"
          readMarkers: true
        message:
          pattern: |
            {
                "level": "%level",
                "class": "%logger{36}",
                "thread": "%thread",
                "message": "%message",
                "requestId": "%X{X-Request-ID}"
            }

  root:
    level: TRACE
    appender-ref:
      - ref: LOKI
